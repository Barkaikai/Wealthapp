ğŸ§© Server Health & Build Checks

âœ… Check the logs:
Open the â€œConsoleâ€ tab in Replit â†’ look for:

Errors like Cannot find module, SyntaxError, or npm ERR!

Warnings about â€œport already in useâ€

âœ… Run manually:

npm install
npm run build
npm start


Make sure you see something like:

Server listening on 3000


âœ… Correct PORT usage:
In your code (usually server.ts or index.js), ensure:

const PORT = process.env.PORT || 3000;
app.listen(PORT);


Replit automatically injects the port via process.env.PORT.

ğŸŒ Replit Configuration Checks

âœ… Open .replit file â€” ensure it includes:

run = "npm start"


or if using TypeScript dev mode:

run = "npm run dev"


âœ… Ensure replit.nix includes NodeJS (e.g., Node 20 or newer):

{ pkgs }: {
  deps = [ pkgs.nodejs-20_x pkgs.bash pkgs.openssl pkgs.git ];
}

âš™ï¸ Networking / Port Exposure

âœ… Ensure the server binds to 0.0.0.0 instead of localhost:

app.listen(PORT, '0.0.0.0', () => console.log(`Server on ${PORT}`));


âœ… No conflicting processes:
If you ran npm start multiple times, stop all running processes in the Replit shell with:

killall node


then restart with npm start.

ğŸ“¦ Dependencies & Build

âœ… Install all dependencies cleanly:

rm -rf node_modules
npm cache clean --force
npm install


âœ… Check package.json scripts:

"start" should point to built JS (node dist/server.js)

"dev" should use ts-node-dev (ts-node-dev src/server.ts)

âœ… Run build step before deploy:

npm run build

ğŸ” Environment & Secrets

âœ… Confirm all required ENV vars are set:

JWT_SECRET=
STRIPE_SECRET_KEY=
SMTP_USER=
PORT=3000


âœ… Check Replit Secrets tab â†’ ensure none of your keys are malformed (e.g. extra quotes).

ğŸ’» Deployment / URL Layer

âœ… Wait 20â€“30 seconds after running.
Replit sometimes takes a bit to boot the HTTPS URL.

âœ… Click the "Open in new tab" globe icon in Replitâ€™s top bar instead of the printed URL.

âœ… If still refused: Try a new Replit instance.
Sometimes Replit routing nodes cache a broken build.

Fork the project or create a new one

Copy your code

Re-run the setup.

ğŸ§ª Verification

âœ… After starting, open the Replit console and confirm it prints:

Server listening on 3000


âœ… Test manually in Replit shell:

curl http://localhost:3000/health


Should return { "ok": true }

âœ… Then open your Replit web URL again â€” it should now connect.